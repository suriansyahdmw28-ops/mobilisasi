<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program MLQ - RSUD Pangeran Jaya Sumitra Kotabaru</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- PERUBAHAN: Memastikan library Chart.js dimuat -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <img src="https://github.com/suriansyahdmw28-ops/mobilisasi/blob/main/logo%20rs.jpg?raw=true" alt="Logo Rumah Sakit" class="logo-image" onerror="this.onerror=null;this.src='https://placehold.co/80x80/e2e8f0/475569?text=Logo';">
                    <div class="header-text">
                        <h1>RSUD Pangeran Jaya Sumitra Kotabaru</h1>
                        <p>Program MLQ - Mobilisasi Dini Pasca Operasi</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <nav class="nav">
        <div class="container">
            <div class="nav-list">
                <button class="nav-item active" data-page="landing"><i class="fas fa-home"></i><span>Beranda</span></button>
                <button class="nav-item" data-page="guide"><i class="fas fa-book"></i><span>Panduan</span></button>
                <!-- PERUBAHAN: Menambahkan tombol navigasi ke halaman Analisis Data -->
                <button class="nav-item" data-page="analisis"><i class="fas fa-chart-line"></i><span>Analisis Data</span></button>
                <button class="nav-item" id="change-clinic-id"><i class="fas fa-edit"></i><span>Ganti ID Klinik</span></button>
            </div>
        </div>
    </nav>

    <!-- Halaman Utama (Daftar Pasien) -->
    <main id="landing-page" class="page">
        <div class="container">
            <div class="page-header">
                <h2>Daftar Pasien Ruang Bedah</h2>
                <button class="btn btn--primary" id="add-patient-btn"><i class="fas fa-plus"></i> Tambah Pasien</button>
            </div>
            <div class="table-container">
                <table id="patient-table" class="data-table">
                    <thead>
                        <tr>
                            <th>Nama Pasien</th>
                            <th>No. RM</th>
                            <th>Jenis Operasi</th>
                            <th>Level Mobilisasi</th>
                            <th>Hari Rawat</th>
                            <!-- PERUBAHAN: Kolom Saran/Aksi dipecah -->
                            <th>Saran / Target</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data pasien akan dimuat di sini oleh JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>
    
    <!-- Halaman Panduan -->
    <main id="guide-page" class="page hidden">
       <div class="container">
            <div class="page-header">
                <h2>Panduan Penggunaan Aplikasi</h2>
            </div>
            <div class="guide-content">
                <h3>Selamat Datang di Aplikasi Mobilisasi Dini Pasca Operasi!</h3>
                <p>Aplikasi ini dirancang untuk membantu perawat memantau dan mencatat kemajuan mobilisasi pasien setelah menjalani operasi. Tujuannya adalah untuk memastikan pasien pulih lebih cepat dan mengurangi risiko komplikasi.</p>
                <h4>Level Mobilisasi Kualitatif (MLQ):</h4>
                <ul>
                    <li><strong>Level 0:</strong> Tidur terlentang, belum sadar penuh atau masih di bawah pengaruh anestesi.</li>
                    <li><strong>Level 1:</strong> Miring kanan dan kiri secara mandiri atau dengan bantuan minimal.</li>
                    <li><strong>Level 2:</strong> Duduk di tempat tidur dengan sandaran ditegakkan.</li>
                    <li><strong>Level 3:</strong> Duduk di tepi tempat tidur dengan kaki menggantung.</li>
                    <li><strong>Level 4:</strong> Berdiri di samping tempat tidur dengan bantuan.</li>
                    <li><strong>Level 5:</strong> Berjalan di sekitar tempat tidur atau di dalam kamar.</li>
                    <li><strong>Level 6:</strong> Berjalan mandiri di koridor atau di luar kamar.</li>
                </ul>
                 <h4>Cara Penggunaan:</h4>
                <ol>
                    <li><strong>Tambah Pasien:</strong> Klik tombol "Tambah Pasien" di halaman Beranda untuk memasukkan data pasien baru.</li>
                    <li><strong>Isi Data:</strong> Lengkapi semua informasi yang diperlukan, termasuk waktu selesai operasi dan level mobilisasi awal.</li>
                    <li><strong>Update Data:</strong> Klik tombol <i class="fas fa-edit"></i> (Update) pada baris pasien untuk memperbarui level mobilisasi atau informasi lainnya seiring kemajuan pasien.</li>
                    <li><strong>Pantau Saran:</strong> Perhatikan kolom "Saran/Target" yang memberikan rekomendasi tindakan berdasarkan kondisi pasien dan hari pasca operasi.</li>
                    <li><strong>Pasien Pulang:</strong> Jika pasien sudah pulang, klik tombol <i class="fas fa-hospital-user"></i> (Pulang) untuk menandai pasien sebagai selesai perawatan.</li>
                     <li><strong>Analisis Data:</strong> Buka halaman "Analisis Data" untuk melihat ringkasan visual kemajuan semua pasien.</li>
                </ol>
            </div>
       </div>
    </main>

    <!-- PERUBAHAN: Menambahkan Halaman Analisis Data -->
    <main id="analisis-page" class="page hidden">
        <div class="container">
            <div class="page-header">
                <h2>Dasbor Analisis Data Mobilisasi</h2>
                <p>Visualisasi data pasien untuk monitoring dan evaluasi program.</p>
            </div>
            <div class="dashboard-grid">
                <div class="chart-container">
                    <h3>Distribusi Pasien per Level Mobilisasi</h3>
                    <canvas id="mobilizationLevelChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Status Pasien</h3>
                    <canvas id="patientStatusChart"></canvas>
                </div>
                 <div class="chart-container">
                    <h3>Rata-rata Lama Rawat (LOS)</h3>
                    <canvas id="losChart"></canvas>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal untuk Tambah/Update Pasien -->
    <div id="patient-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Data Pasien</h3>
                <button id="modal-close-btn" class="modal-close-btn">&times;</button>
            </div>
            <div id="modal-body" class="modal-body"></div>
        </div>
    </div>
    
    <!-- Modal untuk ID Klinik -->
    <div id="clinic-id-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h3 id="clinic-id-modal-title">ID Klinik / Ruangan</h3>
            </div>
            <div id="clinic-id-modal-body" class="modal-body">
                <p>Masukkan ID unik untuk klinik atau ruangan Anda untuk menyimpan dan menyinkronkan data pasien.</p>
                <p><small><strong>Penting:</strong> Gunakan ID yang sama setiap kali Anda membuka aplikasi ini di perangkat baru atau setelah membersihkan cache.</small></p>
                <div class="form-group" style="margin-top: 16px;">
                    <label for="clinic-id-input" class="form-label">Contoh: bedah, kerapu, anak</label>
                    <input type="text" id="clinic-id-input" class="form-control" placeholder="Masukkan ID unik Anda di sini...">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary" id="save-clinic-id-btn">Simpan & Lanjutkan</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <div class="toast-content"><i class="toast-icon"></i><span class="toast-message"></span></div>
    </div>

    <!-- Memuat file JavaScript sebagai module -->
    <script type="module" src="app.js"></script>
</body>
</html>
